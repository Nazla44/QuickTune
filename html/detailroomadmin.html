<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickTune Admin - Update Status</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF49C1;
            --secondary: #44113E;
            --bg-light: #f8f9fa;
            --white: #ffffff;
            --status-available: #27ae60;
            --status-booked: #2980b9;
            --status-cleaning: #f39c12;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg-light); display: flex; min-height: 100vh; }

        /* SIDEBAR */
        .sidebar { width: 260px; background: var(--secondary); color: white; position: fixed; height: 100vh; padding: 20px; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); margin-bottom: 30px; text-align: center; }
        .nav-item { list-style: none; margin-bottom: 10px; }
        .nav-item a { color: rgba(255,255,255,0.7); text-decoration: none; display: flex; align-items: center; padding: 12px; border-radius: 8px; }
        .nav-item.active a { background: rgba(255,255,255,0.1); color: white; border-left: 4px solid var(--primary); }
        .nav-item i { margin-right: 10px; width: 20px; }

        /* MAIN CONTENT */
        .main-content { margin-left: 260px; flex-grow: 1; padding: 40px; }
        .back-link { text-decoration: none; color: var(--primary); font-weight: 600; margin-bottom: 20px; display: inline-block; }
        
        .header-section { margin-bottom: 30px; }
        .breadcrumb { font-size: 0.85rem; color: #888; margin-top: 5px; }

        /* ROOM GRID - Sesuai Gambar */
        .room-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .room-card {
            background: white; border-radius: 15px; padding: 25px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-top: 5px solid #ddd;
        }
        /* Border color sesuai type */
        .card-Bronze { border-top-color: #cd7f32; }
        .card-Silver { border-top-color: #c0c0c0; }
        .card-Gold { border-top-color: #ffd700; }
        .card-Platinum { border-top-color: #e5e4e2; }

        .room-no { font-size: 1.5rem; font-weight: 800; color: var(--secondary); margin-bottom: 10px; }
        .status-info { display: flex; align-items: center; gap: 8px; font-weight: 700; margin-bottom: 15px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; }
        
        .st-available { color: var(--status-available); } .st-available .dot { background: var(--status-available); }
        .st-booked { color: var(--status-booked); } .st-booked .dot { background: var(--status-booked); }
        .st-cleaning { color: var(--status-cleaning); } .st-cleaning .dot { background: var(--status-cleaning); }

        .btn-update { 
            width: 100%; padding: 12px; border: none; border-radius: 10px; 
            background: var(--primary); color: white; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* MODAL */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content { background: white; padding: 30px; border-radius: 15px; width: 400px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        .form-group select, .form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .modal-btns { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
        .btn-save { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="logo">QuickTune</div>
        <nav>
            <li class="nav-item"><a href="indexadmin.html"><i class="fas fa-th-large"></i> Room Management</a></li>
            <li class="nav-item active"><a href="#"><i class="fas fa-bed"></i> Update Status</a></li>
        </nav>
    </aside>

    <main class="main-content">
        <a href="indexadmin.html" class="back-link"><i class="fas fa-arrow-left"></i> Kembali ke Dashboard</a>
        
        <div class="header-section">
            <h2 id="displayTitle">Update Ruangan</h2>
            <div class="breadcrumb">Admin / Room Management / <span id="currentPath">Type</span></div>
        </div>

        <div class="room-grid" id="roomContainer">
            </div>
    </main>

    <div class="modal-overlay" id="modalUpdate">
        <div class="modal-content">
            <h3>Update Room <span id="targetRoomId"></span></h3>
            <div class="form-group">
                <label>Status</label>
                <select id="statusSelect">
                    <option value="available">Tersedia</option>
                    <option value="booked">Dibooking</option>
                    <option value="cleaning">Dibersihkan</option>
                </select>
            </div>
            <div class="form-group">
                <label>Keterangan</label>
                <input type="text" id="descInput">
            </div>
            <div class="modal-btns">
                <button onclick="closeModal()" style="background: #eee; border:none; padding:10px; border-radius:5px; cursor:pointer;">Batal</button>
                <button class="btn-save" onclick="saveStatus()">Simpan</button>
            </div>
        </div>
    </div>

    <script>
        // Data yang disesuaikan dengan parameter type dari URL
        let rooms = [
            { id: 'Mini', type: 'Bronze', status: 'available', statusName: 'Tersedia', desc: 'Single Bed' },
            { id: 'Standar', type: 'Bronze', status: 'booked', statusName: 'Dibooking', desc: 'Selesai 22:00' },
            { id: 'Deluxe', type: 'Bronze', status: 'cleaning', statusName: 'Dibersihkan', desc: 'Target 20:00' },
            { id: 'Party', type: 'Bronze', status: 'available', statusName: 'Tersedia', desc: 'King Bed' },
            { id: 'Studio', type: 'Gold', status: 'available', statusName: 'Tersedia', desc: 'Luxury Suite' },
            { id: 'Pop', type: 'Gold', status: 'available', statusName: 'Tersedia', desc: 'Single Bed' },
            { id: 'Akustik', type: 'Gold', status: 'booked', statusName: 'Dibooking', desc: 'Selesai 22:00' },
            { id: 'Premiere', type: 'Gold', status: 'cleaning', statusName: 'Dibersihkan', desc: 'Target 20:00' },
            { id: 'Lounge', type: 'Silver', status: 'available', statusName: 'Tersedia', desc: 'King Bed' },
            { id: 'Exclusive', type: 'Silver', status: 'available', statusName: 'Tersedia', desc: 'Luxury Suite' },
            { id: 'Mirror', type: 'Silver', status: 'available', statusName: 'Tersedia', desc: 'Single Bed' },
            { id: 'Star', type: 'Silver', status: 'booked', statusName: 'Dibooking', desc: 'Selesai 22:00' },
            { id: 'VIP', type: 'Platinum', status: 'cleaning', statusName: 'Dibersihkan', desc: 'Target 20:00' },
            { id: 'VVIP', type: 'Platinum', status: 'available', statusName: 'Tersedia', desc: 'King Bed' },
            { id: 'Grand Mega', type: 'Platinum', status: 'available', statusName: 'Tersedia', desc: 'Luxury Suite' },
            { id: 'Hall', type: 'Platinum', status: 'available', statusName: 'Tersedia', desc: 'Luxury Suite' },

        ];

        let activeRoomId = null;

        function renderRooms() {
    const params = new URLSearchParams(window.location.search);
    const selectedType = params.get('type') || 'Bronze';
    
    document.getElementById('displayTitle').innerText = `Update Ruangan ${selectedType}`;
    document.getElementById('currentPath').innerText = selectedType;

    const container = document.getElementById('roomContainer');
    const filtered = rooms.filter(r => r.type === selectedType);

    if(filtered.length === 0) {
        container.innerHTML = `<p>Tidak ada ruangan tipe ${selectedType}</p>`;
        return;
    }

    container.innerHTML = filtered.map(room => `
        <div class="room-card card-${room.type}">
            <div class="room-no">${room.id}</div>
            <div class="status-info st-${room.status}">
                <span class="dot"></span> ${room.statusName}
            </div>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">${room.desc}</p>
            <button class="btn-update" onclick="goToUpdate('${room.id}', '${room.type}')">
                <i class="fas fa-sync-alt"></i> Update Status
            </button>
        </div>
    `).join('');
}

// FUNGSI BARU UNTUK PINDAH HALAMAN
function goToUpdate(roomId, roomType) {
    // Membawa parameter ID ruangan dan Tipenya ke halaman update
    window.location.href = `updateroom.html?id=${roomId}&type=${roomType}`;
}

        function openModal(id) {
            activeRoomId = id;
            const room = rooms.find(r => r.id === id);
            document.getElementById('targetRoomId').innerText = id;
            document.getElementById('statusSelect').value = room.status;
            document.getElementById('descInput').value = room.desc;
            document.getElementById('modalUpdate').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modalUpdate').style.display = 'none';
        }

        function saveStatus() {
            const index = rooms.findIndex(r => r.id === activeRoomId);
            const newStatus = document.getElementById('statusSelect').value;
            const names = { available: 'Tersedia', booked: 'Dibooking', cleaning: 'Dibersihkan' };
            
            rooms[index].status = newStatus;
            rooms[index].statusName = names[newStatus];
            rooms[index].desc = document.getElementById('descInput').value;

            closeModal();
            renderRooms();
        }

        window.onload = renderRooms;
    </script>
</body>
</html>